repositories {
    mavenCentral()
}

apply plugin: 'java'

java {
    sourceCompatibility = 17
    targetCompatibility = 17
}

group = 'com.itsaur'
version = "1.0_${elasticsearchVersion}"

dependencies {
    compileOnly "org.elasticsearch:elasticsearch:${elasticsearchVersion}"
}

jar {
    archiveBaseName = "index-refresh-plugin"
}

println "Building for version ${elasticsearchVersion}"

tasks.register("buildPlugin", Zip) {
    var pluginName = "index-refresh-plugin"

    archiveBaseName = "${pluginName}"
    include "${pluginName}-${version}.jar"
    destinationDirectory = layout.buildDirectory.dir('plugin')

    from jar
}
